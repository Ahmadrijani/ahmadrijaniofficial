<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Mengarahkan...</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
:root{
  --bg:#e9ecef;
  --card:#ffffff;
  --muted:#6b7280;
  --accent:#2b8cff;
  --error:#ef4444;
  --glass-border: rgba(0,0,0,0.06);
  --radius:14px;
  --shadow: 0 10px 30px rgba(15,23,42,0.12);
}

html,body{
  height:100%;
  margin:0;
  background:var(--bg);
  font-family:"Comic Sans MS","Comic Sans","ComicNeue",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  display:grid;
  place-items:center;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

.card{
  position:relative;
  width:95%;
  max-width:400px;
  background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(250,250,250,0.96));
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  border:1px solid var(--glass-border);
  padding:28px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
  text-align:center;
}

.top-banner{
  width:100%;
  font-size:14px;
  color:var(--muted);
  display:flex;
  justify-content:center;
  gap:6px;
  flex-wrap:wrap;
}
.top-banner a{
  color:var(--accent);
  font-weight:600;
  text-decoration:none;
}

.error-title{
  font-size:24px;
  font-weight:bold;
  color:var(--error);
}

.spinner-container{
  position:relative;
  width:100px;
  height:100px;
  display:grid;
  place-items:center;
  margin-top:10px;
}

/* spinner sekarang punya ring yang berputar, tapi teks di tengah tidak ikut berputar */
.spinner{
  width:100px;
  height:100px;
  position:relative;
  display:grid;
  place-items:center;
  pointer-events:none;
}

.spinner .ring{
  position:absolute;
  inset:0;
  border-radius:50%;
  background: conic-gradient(
    rgb(43,140,255),
    rgb(0,200,150),
    rgb(255,120,80),
    rgb(43,140,255)
  );
  transform-origin:center;
  animation:spin 1s linear infinite;
  /* untuk memberi kesan 'garis' ubah inner hole di .ring::before */
}
.spinner .ring::before{
  content:"";
  position:absolute;
  inset:8px;
  border-radius:50%;
  background:var(--card);
  box-shadow: 0 4px 12px rgba(15,23,42,0.04);
}

.spinner .spin-text{
  position:relative;
  z-index:2;
  font-weight:bold;
  font-size:22px;
  color:var(--accent);
  display:grid;
  place-items:center;
  width:100%;
  height:100%;
  pointer-events:none;
}

@keyframes spin{ to { transform: rotate(360deg); } }

.spinner.error .ring{
  animation:none;
  background: rgb(239,68,68); /* merah RGB saat error */
}
.spinner.error .spin-text{
  color: #7a1b1b;
}

.info{
  font-size:18px;
  font-weight:700;
  color:#0f172a;
}

.status{
  font-size:13px;
  color:var(--muted);
}

/* tombol pindah manual */
.manualBtn{
  margin-top:8px;
  padding:10px 16px;
  border-radius:10px;
  border:1px solid rgba(15,23,42,0.06);
  background:linear-gradient(180deg,var(--accent),#1f6fd8);
  color:#fff;
  font-weight:700;
  cursor:pointer;
  display:inline-flex;
  gap:8px;
  align-items:center;
}

/* tombol X besar */
.bigX{
  width:140px;
  height:140px;
  border-radius:50%;
  display:grid;
  place-items:center;
  font-size:48px;
  color:#ef4444;
  background:rgba(255,255,255,0.85);
  border:2px solid rgba(0,0,0,0.06);
  cursor:pointer;
  margin-top:16px;
  font-weight:bold;
}

.address{
  font-size:14px;
  color:var(--muted);
  margin-top:12px;
}

.device-info{
  font-size:14px;
  color:var(--muted);
  margin-top:8px;
}

@media(max-width:480px){
  .spinner{ width:80px; height:80px; }
  .spinner .spin-text{ font-size:18px; }
  .bigX{ width:120px; height:120px; font-size:42px; }
  .card{ padding:20px; max-width:90%; }
  .manualBtn{ padding:12px 20px; font-size:16px; }
}
</style>
</head>
<body>
<div class="card" role="dialog" aria-labelledby="info" aria-describedby="status">

  <div class="error-title">404 NOT FOUND</div>

  <div class="top-banner">
    <i class="fa-solid fa-location-arrow"></i>
    Alamat lama sudah dipindahkan ke 
    <a href="https://ahmadrijani.github.io/ahmadrijaniofficial/Semua.link/link.html" target="_blank">link baru</a>
  </div>

  <div class="spinner-container">
    <div class="spinner" id="spinner">
      <div class="ring" aria-hidden="true"></div>
      <div class="spin-text" id="spinnerText">60</div>
    </div>
  </div>

  <div class="info" id="info">Mengarahkan ke versi terbaru...</div>
  <div class="status" id="status">Tekan <strong>ESC</strong> atau klik ❌ untuk membatalkan. Setelah dibatalkan, akan mencoba lagi dalam 60 detik.</div>

  <button class="manualBtn" id="manualBtn">Pindah Manual</button>

  <div class="bigX" id="batalVirtual">✖</div>

  <div class="device-info" id="deviceInfo"></div>

</div>

<script>
(function(){
  const urlTujuan = "https://ahmadrijani.github.io/ahmadrijaniofficial/Semua.link/link.html";
  const spinner = document.getElementById('spinner');
  const spinnerText = document.getElementById('spinnerText');
  const ring = spinner.querySelector('.ring');
  const batalVirtual = document.getElementById('batalVirtual');
  const info = document.getElementById('info');
  const status = document.getElementById('status');
  const deviceInfo = document.getElementById('deviceInfo');
  const manualBtn = document.getElementById('manualBtn');

  let batal = false;
  let mencobaLagi = false;
  let cooldownId = null;
  let retryRemaining = 60;
  let redirected = false;

  spinnerText.textContent = retryRemaining;

  function startRetryCountdown(seconds = 60){
    mencobaLagi = true;
    retryRemaining = seconds;
    spinner.classList.remove('error');
    spinnerText.textContent = retryRemaining;
    status.innerHTML = "Tekan <strong>ESC</strong> atau klik ❌ untuk membatalkan percobaan ulang.";

    cooldownId = setInterval(()=>{
      retryRemaining--;
      spinnerText.textContent = retryRemaining;
      if(retryRemaining <= 0){
        clearInterval(cooldownId);
        mencobaLagi = false;
        batal = false;
        info.textContent = "Mengarahkan ulang...";
        status.innerHTML = "Tekan <strong>ESC</strong> untuk membatalkan.";
        setTimeout(()=> { doRedirect(); }, 500);
      }
    },1000);
  }

  function cancelOrToggleRetry(){
    if(!mencobaLagi){
      batal = true;
      info.textContent = "Pengalihan dibatalkan.";
      status.textContent = "Mencoba lagi dalam 60 detik... Tekan ESC atau klik ❌ lagi untuk hentikan total.";
      startRetryCountdown(60);
    } else {
      clearInterval(cooldownId);
      mencobaLagi = false;
      batal = true;
      info.textContent = "ERROR";
      status.textContent = "Percobaan ulang dibatalkan sepenuhnya.";
      spinner.classList.add('error');
      spinnerText.textContent = "ERR";
    }
  }

  function doRedirect(){
    if(redirected) return;
    redirected = true;
    window.location.replace(urlTujuan);
  }

  manualBtn.addEventListener('click', doRedirect);
  batalVirtual.addEventListener('click', cancelOrToggleRetry);
  window.addEventListener('keydown', (e)=>{ if(e.key==="Escape"){ cancelOrToggleRetry(); } });

  let isAndroid = /android/i.test(navigator.userAgent);
  let timeout = isAndroid ? 900 : 600;
  deviceInfo.textContent = "Perangkat Anda: " + (isAndroid ? "Android" : "PC / Desktop");

  history.pushState(null, document.title, location.href);
  window.addEventListener('popstate', (e)=>{
    cancelOrToggleRetry();
    history.pushState(null, document.title, location.href);
  });

  setTimeout(()=>{
    if(!batal && !redirected){
      doRedirect();
    }
  }, timeout);
})();
</script>
</body>
</html>
